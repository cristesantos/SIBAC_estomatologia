package regras

import com.exemplo.estomatologia.model.Hipotese;
import com.exemplo.estomatologia.model.Evidencia;
import com.exemplo.estomatologia.model.Diagnostico;

rule "Inicializar Hipotese Periodontite Estágio 3"
when
    not Hipotese(nome == "Doença Periodontal Estágio 3")
then
    insert(new Hipotese("Doença Periodontal Estágio 3"));
end

rule "Dor moderada ou alta indica Periodontite Estágio 3"
when
    $h : Hipotese(nome == "Doença Periodontal Estágio 3")
    Evidencia(tipo == "dor", (valor == "moderada" || valor == "alta"), $fc : 0.9)
then
    $h.atualizarFC($fc);
end

rule "Sangramento indica Periodontite Estágio 3"
when
    $h : Hipotese(nome == "Doença Periodontal Estágio 3")
    Evidencia(tipo == "sangramento", valor == "true", $fc : 0.7)
then
    $h.atualizarFC($fc);
end

// Regras similares para profundidadeBolsa, mobilidade, aumentoBolsa, fístula...

rule "Gerar diagnóstico final para Periodontite Estágio 3"
when
    $h : Hipotese(nome == "Doença Periodontal Estágio 3", $fc : fc)
    eval($fc > 0.3)
then
    insert(new Diagnostico("Doença Periodontal Estágio 3", $fc));
end
